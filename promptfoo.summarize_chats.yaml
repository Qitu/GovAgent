configVersion: 1
providers:
  - id: openai:gpt-4o-mini
    config:
      apiKey: ${OPENAI_API_KEY}
      temperature: 0.2
prompts:
  - file: generative_agents/data/prompts/summarize_chats.txt

vars:
  conversation: |
    Police: We need to prepare for tomorrow's briefing.
    Coordinator: Okay, I'll organize the materials tonight.
    Police: Please also confirm the meeting room booking.
    Coordinator: Sure, I'll handle it now.

scenarios:
  - name: Short summary (Crowd and Coordinator)
    vars:
      conversation: |
        Crowd: The event briefing is tomorrow and needs preparation
        Coordinator: Will organize materials tonight and confirm meeting room

assertions:
  - type: javascript
    code: |
      const out = output.trim();
      if (out.length === 0) return { pass: false, reason: 'empty' };
      if (out.length > 100) return { pass: false, reason: 'exceeds 100 characters' };
      return true;
  - type: not-contains
    value: "\"\"\""
  - type: javascript
    code: |
      const out = output.trim();
      if (out.includes("\n")) return { pass: false, reason: 'should be single-line output' };
      return true;