configVersion: 1
providers:
  - id: openai:gpt-4o-mini
    config:
      apiKey: ${OPENAI_API_KEY}
      temperature: 0.0
prompts:
  - file: generative_agents/data/prompts/decide_wait.txt

# For decide_wait.txt, it expects three blocks: examples_1 / examples_2 / task
vars:
  examples_1: |
    Background: Example - shared resource conflict
    Reasoning: The other person is already using the target resource, waiting is recommended
    Answer: <OptionA>
  examples_2: |
    Background: Example - different areas activities
    Reasoning: No conflict, continue current action
    Answer: <OptionB>
  task: |
    Background: Both need to use the printer, and one is already printing
    Question: Should we wait now?

scenarios:
  - name: Resource conflict - should wait
    vars:
      task: "Background: Both need to use the printer, and one is already printing\nQuestion: Should we wait now?"
  - name: Different areas - can continue
    vars:
      task: "Background: Person A is going to the cafeteria for lunch, Person B is washing clothes in the laundry room\nQuestion: Should A continue heading to the cafeteria?"

assertions:
  # Output must include <OptionA> or <OptionB> (template examples format)
  - type: javascript
    code: |
      const out = output.trim();
      const ok = /<OptionA>|<OptionB>/.test(out);
      return ok ? true : { pass: false, reason: 'Output must be <OptionA> or <OptionB>' };
  # Must not include the literal word "Reasoning" (coarse check: avoid process explanation)
  - type: not-contains
    value: "Reasoning"